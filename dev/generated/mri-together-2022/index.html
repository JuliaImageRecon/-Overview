<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>MRI Together Workshop 2022 · About</title><meta name="title" content="MRI Together Workshop 2022 · About"/><meta property="og:title" content="MRI Together Workshop 2022 · About"/><meta property="twitter:title" content="MRI Together Workshop 2022 · About"/><meta name="description" content="Documentation for About."/><meta property="og:description" content="Documentation for About."/><meta property="twitter:description" content="Documentation for About."/><meta property="og:url" content="https://JuliaImageRecon.github.io/About/stable/generated/mri-together-2022/"/><meta property="twitter:url" content="https://JuliaImageRecon.github.io/About/stable/generated/mri-together-2022/"/><link rel="canonical" href="https://JuliaImageRecon.github.io/About/stable/generated/mri-together-2022/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/custom.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">About</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../methods/">Methods</a></li><li><span class="tocitem">Examples</span><ul><li class="is-active"><a class="tocitem" href>MRI Together Workshop 2022</a><ul class="internal"><li class="toplevel"><a class="tocitem" href="#Session:-Expanding-your-image-reconstruction-toolbox"><span>Session: Expanding your image reconstruction toolbox</span></a></li><li class="toplevel"><a class="tocitem" href="#Image-Reconstruction-Using-Julia"><span>Image Reconstruction Using Julia</span></a></li><li><a class="tocitem" href="#Together"><span>Together</span></a></li><li class="toplevel"><a class="tocitem" href="#Links"><span>Links</span></a></li><li><a class="tocitem" href="#Why-Julia-for-image-reconstruction?"><span>Why Julia for image reconstruction?</span></a></li><li><a class="tocitem" href="#Brief-history-of-Julia"><span>Brief history of Julia</span></a></li><li><a class="tocitem" href="#Brief-taste-of-Julia"><span>Brief taste of Julia</span></a></li><li><a class="tocitem" href="#&quot;Expanding-your-image-reconstruction-toolbox&quot;"><span>&quot;Expanding your image reconstruction toolbox&quot;</span></a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Examples</a></li><li class="is-active"><a href>MRI Together Workshop 2022</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>MRI Together Workshop 2022</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaImageRecon/About" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaImageRecon/About/blob/main/docs/lit/mri-together-2022.jl" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="mri-together-2022"><a class="docs-heading-anchor" href="#mri-together-2022">MRI Together Workshop 2022</a><a id="mri-together-2022-1"></a><a class="docs-heading-anchor-permalink" href="#mri-together-2022" title="Permalink"></a></h1><p><a href="https://mritogether.esmrmb.org">https://mritogether.esmrmb.org</a></p><hr/><h1 id="Session:-Expanding-your-image-reconstruction-toolbox"><a class="docs-heading-anchor" href="#Session:-Expanding-your-image-reconstruction-toolbox">Session: Expanding your image reconstruction toolbox</a><a id="Session:-Expanding-your-image-reconstruction-toolbox-1"></a><a class="docs-heading-anchor-permalink" href="#Session:-Expanding-your-image-reconstruction-toolbox" title="Permalink"></a></h1><h1 id="Image-Reconstruction-Using-Julia"><a class="docs-heading-anchor" href="#Image-Reconstruction-Using-Julia">Image Reconstruction Using Julia</a><a id="Image-Reconstruction-Using-Julia-1"></a><a class="docs-heading-anchor-permalink" href="#Image-Reconstruction-Using-Julia" title="Permalink"></a></h1><ul><li><a href="https://web.eecs.umich.edu/~fessler/">Jeff Fessler</a>, University of Michigan, US,</li><li><a href="https://www.tuhh.de/ibi/people/tobias-knopp-head-of-institute.html">Tobias Knopp</a>, Technische Universität Hamburg (TUHH), Germany</li></ul><p>Conflicts of interest regarding this presentation: Nothing to disclose</p><p>The copyright of this presentation belongs to the Speaker. This presentation is released under a <a href="https://creativecommons.org/licenses/by/4.0">CC-BY</a> license.</p><p>This page originates from <a href="https://github.com/JuliaImageRecon/About">About</a> and discusses <a href="https://julialang.org">Julia</a> and Julia packages for image reconstruction.</p><p>This page was generated from a single Julia file: <a href="https://github.com/JuliaImageRecon/About/blob/main/docs/lit/mri-together-2022.jl">mri-together-2022.jl</a>.</p><p>In any such Julia documentation, you can access the source code using the &quot;Edit on GitHub&quot; link in the top right.</p><p>The corresponding notebook can be viewed in <a href="http://nbviewer.jupyter.org/">nbviewer</a> here: <a href="https://nbviewer.org/github/JuliaImageRecon/About/tree/gh-pages/dev/generated/mri-together-2022.ipynb"><code>mri-together-2022.ipynb</code></a>, and opened in <a href="https://mybinder.org/">binder</a> here: <a href="https://mybinder.org/v2/gh/JuliaImageRecon/About/gh-pages?filepath=dev/generated/mri-together-2022.ipynb"><code>mri-together-2022.ipynb</code></a>.</p><hr/><h2 id="Together"><a class="docs-heading-anchor" href="#Together">Together</a><a id="Together-1"></a><a class="docs-heading-anchor-permalink" href="#Together" title="Permalink"></a></h2><ul><li>Thank you to organizers!</li><li>Ancient history: <a href="https://netlib.org">Netlib</a> distributing shared math software by email <a href="http://doi.org/10.1145/22899.22904">1987 paper</a></li><li>My <a href="https://netlib.org/gcv/vspline">first contribution</a> in 1990</li><li>Transition from lone actors to teams &quot;together&quot;</li></ul><hr/><h1 id="Links"><a class="docs-heading-anchor" href="#Links">Links</a><a id="Links-1"></a><a class="docs-heading-anchor-permalink" href="#Links" title="Permalink"></a></h1><ul><li><p><a href="https://juliaimagerecon.github.io/Examples">https://juliaimagerecon.github.io/Examples</a> (also has Julia setup instructions)</p></li><li><p><a href="https://github.com/JeffFessler/MIRT.jl">https://github.com/JeffFessler/MIRT.jl</a> Julia version</p></li><li><p><a href="https://github.com/guanhuaw/MIRTorch">https://github.com/guanhuaw/MIRTorch</a> PyTorch version</p></li><li><p><a href="https://github.com/JeffFessler/mirt">https://github.com/JeffFessler/mirt</a> Matlab version</p></li><li><p><a href="https://github.com/StevenWhitaker/BlochSim.jl">https://github.com/StevenWhitaker/BlochSim.jl</a></p></li><li><p><a href="https://github.com/cncastillo/KomaMRI.jl">https://github.com/cncastillo/KomaMRI.jl</a></p></li><li><p><a href="https://github.com/JuliaMath/NFFT.jl">https://github.com/JuliaMath/NFFT.jl</a></p></li><li><p><a href="https://github.com/MagneticResonanceImaging">https://github.com/MagneticResonanceImaging</a></p></li><li><p>...</p></li></ul><hr/><h2 id="Why-Julia-for-image-reconstruction?"><a class="docs-heading-anchor" href="#Why-Julia-for-image-reconstruction?">Why Julia for image reconstruction?</a><a id="Why-Julia-for-image-reconstruction?-1"></a><a class="docs-heading-anchor-permalink" href="#Why-Julia-for-image-reconstruction?" title="Permalink"></a></h2><ul><li><p>Speed:</p><ul><li>Performance of a compiled language (JIT via LLVM)</li><li>Easy use of threads, distributed computing, GPU</li><li>Memory efficient: <code>Float16</code>, Sparse of any type, call by ref.</li></ul></li><li><p>Ease of use (solves &quot;2-language problem&quot;):</p><ul><li>Interactive development / prototyping</li><li>Dynamic typing / Jupyter notebooks</li><li>Extensive <a href="https://docs.julialang.org">documentation</a></li></ul></li><li><p>Ease of coding / readability:</p><ul><li>Readable syntax matches the mathematics of computational imaging</li><li>Unicode / UTF-8 <code>α β Ω θ Δ √ ⊗ ∞ …</code></li><li>Built-in operations with numerical arrays</li><li>Namespace control with <code>using</code> and <code>import</code></li><li>IDE / debuggers: VSCode etc.</li><li>Code reuse (object oriented): multiple dispatch, subtypes</li><li>Combines best of Matlab, Python, LISP, ...</li></ul></li><li><p>Libraries:</p><ul><li><code>FFTW</code> <code>LAPACK</code> <a href="https://github.com/JuliaGPU/CUDA.jl"><code>CUDA</code></a> ...</li><li>Interoperable with other languages <code>ccall</code> <code>pycall</code> <a href="https://github.com/JuliaInterop/MATLAB.jl">MATLAB.jl</a></li></ul></li><li><p>Reproducibility:</p><ul><li><code>git</code>, <code>Pkg</code>, <code>Manifest</code></li><li>Julia-based markdown documentation (including this presentation) using <a href="https://fredrikekre.github.io/Literate.jl">Literate.jl</a></li><li>Continuous integration / code coverage with GitHub Actions</li></ul></li><li><p>Free &amp; open source</p></li></ul><hr/><h2 id="Brief-history-of-Julia"><a class="docs-heading-anchor" href="#Brief-history-of-Julia">Brief history of Julia</a><a id="Brief-history-of-Julia-1"></a><a class="docs-heading-anchor-permalink" href="#Brief-history-of-Julia" title="Permalink"></a></h2><ul><li><p>Started in 2009 around MIT (Alan Edelman, Jeff Bezanson, Stefan Karpinski, and Viral B. Shah)</p></li><li><p>First release in 2012</p></li><li><p>2017 SIAM Review <a href="http://doi.org/10.1137/141000671">paper</a></p></li><li><p>Version 1.0 in Aug. 2018</p></li><li><p>Used at University of Michigan since 2017 (1000s of students)</p></li></ul><hr/><h2 id="Brief-taste-of-Julia"><a class="docs-heading-anchor" href="#Brief-taste-of-Julia">Brief taste of Julia</a><a id="Brief-taste-of-Julia-1"></a><a class="docs-heading-anchor-permalink" href="#Brief-taste-of-Julia" title="Permalink"></a></h2><h3 id="Function-definitions"><a class="docs-heading-anchor" href="#Function-definitions">Function definitions</a><a id="Function-definitions-1"></a><a class="docs-heading-anchor-permalink" href="#Function-definitions" title="Permalink"></a></h3><p>Ways to define the function <span>$f(x,y) = x^2 + y^3$</span> in Julia:</p><pre><code class="language-julia hljs">function f1(x,y)
    return x^2 + y^3
end

f3 = (x,y) -&gt; x^2 + y^3

f(x,y) = x^2 + y^3 # looks the most like the math

f(4,5)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">141</code></pre><h3 id="Gradient-descent-example"><a class="docs-heading-anchor" href="#Gradient-descent-example">Gradient descent example</a><a id="Gradient-descent-example-1"></a><a class="docs-heading-anchor-permalink" href="#Gradient-descent-example" title="Permalink"></a></h3><p>To minimize <span>$f(x)$</span> using gradient descent (for illustration) in math:</p><p class="math-container">\[x_k = x_{k-1} - \alpha \nabla f(x_{k-1})
, \text{ for } k=1,2,\ldots,N_{\mathrm{iter}}\]</p><p>Enter symbols like <code>α</code> with LaTeX codes and tab completion: <code>\alpha&lt;tab&gt;</code>.</p><p>Julia code for GD below looks remarkably similar to the math.</p><ul><li>Type annotation is optional.</li><li>Arguments following <code>;</code> are named keyword arguments.</li></ul><pre><code class="language-julia hljs">function gd(∇f::Function, α::Real, x ; Niter::Int = 50)
    for iter in 1:Niter
         x = x - α * ∇f(x)
    end
    return x
end</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">gd (generic function with 1 method)</code></pre><h3 id="Testing-the-GD-function"><a class="docs-heading-anchor" href="#Testing-the-GD-function">Testing the GD function</a><a id="Testing-the-GD-function-1"></a><a class="docs-heading-anchor-permalink" href="#Testing-the-GD-function" title="Permalink"></a></h3><p>Example: <span>$f(x) = \frac{1}{2} \| A x - y \|^2$</span> ⟹ <span>$∇ f(x) = A&#39; (A x - y)$</span> ⟹ <span>$L_{∇f} = \| A \|_2^2$</span> ⟹ <span>$α = 1/L_{∇f}$</span></p><pre><code class="language-julia hljs">using LinearAlgebra: opnorm # same as svdvals(A)[1]
M,N = 6,4
A = randn(M,N); y = randn(M); # test data
∇f(x) = A&#39;*(A*x - y) # LS gradient
xh = A \ y # global minimizer of f
α = 1/opnorm(A)^2 # step size = 1/Lipschitz constant
xgd = gd(∇f, α, zeros(N) ; Niter=9000)
@assert xgd ≈ xh # equivalent within precision of type</code></pre><h3 id="Image-example"><a class="docs-heading-anchor" href="#Image-example">Image example</a><a id="Image-example-1"></a><a class="docs-heading-anchor-permalink" href="#Image-example" title="Permalink"></a></h3><p>Since this is an imaging workshop, this page must include at least one image...</p><pre><code class="language-julia hljs">using MIRTjim: jim
x = range(-1,1,15)
y = range(-1,1,11)
image = f.(x, y&#39;) # broadcast !
p1 = jim(image; color=:cividis, title=&quot;Image Example&quot;)</code></pre><img src="93aa1fa8.svg" alt="Example block output"/><hr/><h2 id="&quot;Expanding-your-image-reconstruction-toolbox&quot;"><a class="docs-heading-anchor" href="#&quot;Expanding-your-image-reconstruction-toolbox&quot;">&quot;Expanding your image reconstruction toolbox&quot;</a><a id="&quot;Expanding-your-image-reconstruction-toolbox&quot;-1"></a><a class="docs-heading-anchor-permalink" href="#&quot;Expanding-your-image-reconstruction-toolbox&quot;" title="Permalink"></a></h2><ul><li><p>The mega-package approach of BART/MIRT/ASTRA/... in Matlab, Python, C.</p></li><li><p>Julia way: &quot;ala carte&quot; by <code>using</code> methods from various packages.</p></li><li><p>Chef&#39;s recommended menu? Documented examples!</p><ul><li><a href="https://juliaimagerecon.github.io/Examples/generated/mri/5-l-plus-s">L+S dynamic MRI recon</a></li><li><a href="https://github.com/MagneticResonanceImaging/MRIFieldmaps.jl">MRIFieldmaps.jl</a></li></ul></li></ul><hr/><h3 id="Reproducibility"><a class="docs-heading-anchor" href="#Reproducibility">Reproducibility</a><a id="Reproducibility-1"></a><a class="docs-heading-anchor-permalink" href="#Reproducibility" title="Permalink"></a></h3><p>This page was generated with the following version of Julia:</p><pre><code class="language-julia hljs">using InteractiveUtils: versioninfo
io = IOBuffer(); versioninfo(io); split(String(take!(io)), &#39;\n&#39;)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">12-element Vector{SubString{String}}:
 &quot;Julia Version 1.9.3&quot;
 &quot;Commit bed2cd540a1 (2023-08-24 14:43 UTC)&quot;
 &quot;Build Info:&quot;
 &quot;  Official https://julialang.org/ release&quot;
 &quot;Platform Info:&quot;
 &quot;  OS: Linux (x86_64-linux-gnu)&quot;
 &quot;  CPU: 2 × Intel(R) Xeon(R) CPU E5-2673 v4 @ 2.30GHz&quot;
 &quot;  WORD_SIZE: 64&quot;
 &quot;  LIBM: libopenlibm&quot;
 &quot;  LLVM: libLLVM-14.0.6 (ORCJIT, broadwell)&quot;
 &quot;  Threads: 1 on 2 virtual cores&quot;
 &quot;&quot;</code></pre><p>And with the following package versions</p><pre><code class="language-julia hljs">import Pkg; Pkg.status()</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Status `~/work/About/About/docs/Project.toml`
  [234ee3bc] About v0.0.0 `~/work/About/About`
  [e30172f5] Documenter v1.0.1
  [98b081ad] Literate v2.15.0
  [170b2178] MIRTjim v0.23.0
  [91a5bcdd] Plots v1.39.0
  [1986cc42] Unitful v1.17.0
  [b77e0a4c] InteractiveUtils
  [9a3f8284] Random</code></pre><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../methods/">« Methods</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.0.1 on <span class="colophon-date" title="Monday 18 September 2023 12:05">Monday 18 September 2023</span>. Using Julia version 1.9.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
